# CGView 桌面版 - 用户手册

**版本**: v0.3.0
**更新日期**: 2025年11月5日

---

## 目录

1. [简介](#1-简介)
2. [系统要求](#2-系统要求)
3. [安装指南](#3-安装指南)
4. [快速开始](#4-快速开始)
5. [详细功能说明](#5-详细功能说明)
6. [数据导入指南](#6-数据导入指南)
7. [工作区使用](#7-工作区使用)
8. [图层配置](#8-图层配置)
9. [特征筛选](#9-特征筛选)
10. [统计轨道](#10-统计轨道)
11. [配置管理](#11-配置管理)
12. [数据导出](#12-数据导出)
13. [性能优化](#13-性能优化)
14. [常见问题](#14-常见问题)
15. [最佳实践](#15-最佳实践)
16. [故障排除](#16-故障排除)

---

## 1. 简介

CGView 桌面版是专为基因组学研究人员设计的环状基因组可视化工具。它将复杂的基因组数据转化为直观、交互式的环状图形，帮助研究人员快速理解基因组结构、特征分布和统计分析信息。

### 1.1 主要优势

- **专业级可视化** - 基于成熟的 CGView 算法，提供科学准确的可视化结果
- **现代化界面** - 直观的左右分栏设计，操作简单，学习成本低
- **高性能处理** - 优化的大数据集处理能力，支持 50,000+ 特征的数据集
- **灵活配置** - 完整的配置管理系统，支持保存、加载和分享配置方案
- **多语言支持** - 完整的中文和英文界面，适合不同地区的研究人员

### 1.2 应用场景

- **基因组结构分析** - 可视化环状基因组的整体结构
- **基因注释查看** - 清晰展示基因、CDS、rRNA 等特征类型
- **比较基因组学** - 对比不同菌株或物种的基因组特征
- **数据质量评估** - 通过统计轨道分析测序质量和基因组特征
- **学术论文制图** - 生成高质量图像用于科研论文

---

## 2. 系统要求

### 2.1 最低要求

| 项目 | 要求 |
|------|------|
| 操作系统 | Windows 10, macOS 10.15, Ubuntu 18.04 |
| CPU | 双核 2.0 GHz |
| 内存 | 4 GB RAM |
| 硬盘空间 | 500 MB 可用空间 |
| 显卡 | 集成显卡 |
| 屏幕分辨率 | 1280x800 |

### 2.2 推荐配置

| 项目 | 推荐配置 |
|------|----------|
| 操作系统 | Windows 11, macOS 12+, Ubuntu 20.04+ |
| CPU | 四核 3.0 GHz+ |
| 内存 | 8 GB+ RAM |
| 硬盘空间 | 2 GB+ 可用空间（SSD 优先） |
| 显卡 | 独立显卡 |
| 屏幕分辨率 | 1920x1080+ |

### 2.3 支持的文件格式

- **GenBank** (.gb, .gbk)
- **GFF3** (.gff3)
- **JSON** (.json)
- **CSV** (.csv)

---

## 3. 安装指南

### 3.1 开发环境安装

#### 步骤 1: 检查环境

确保您的系统已安装 Node.js：

```bash
node --version  # 应 >= 16.0.0
npm --version   # 应 >= 8.0.0
```

#### 步骤 2: 克隆项目

```bash
git clone https://github.com/your-org/cgview-desktop.git
cd cgview-desktop
```

#### 步骤 3: 安装依赖

```bash
# 使用 npm
npm install

# 或使用 yarn
yarn install

# 或使用 pnpm（推荐，速度更快）
pnpm install
```

#### 步骤 4: 启动应用

```bash
npm run dev
```

首次启动会耗时较长，请耐心等待。启动成功后，浏览器会自动打开应用页面。

### 3.2 生产环境构建

如需构建可分发的应用包：

```bash
# 构建渲染进程
npm run build

# 为当前平台构建 Electron 应用
npm run electron:build

# 为所有平台构建（Windows/macOS/Linux）
npm run electron:build:all
```

构建完成后，可执行文件将生成在 `dist/` 目录中。

### 3.3 故障排除

**问题**: npm install 失败
```
解决方案:
1. 清除 npm 缓存: npm cache clean --force
2. 删除 node_modules: rm -rf node_modules
3. 重新安装: npm install
```

**问题**: 端口 5173 被占用
```
解决方案:
1. 修改端口: npm run dev -- --port 3000
2. 或关闭占用端口的进程
```

**问题**: Electron 启动失败
```
解决方案:
1. 检查 Node.js 版本: node --version
2. 重新安装依赖: rm -rf node_modules && npm install
3. 运行: npm run electron:dev
```

---

## 4. 快速开始

本章节通过一个简单示例，让您快速掌握 CGView 的基本使用方法。

### 4.1 步骤一：创建项目

1. 启动应用后，您将看到欢迎界面
2. 点击 **"创建项目"** 按钮
3. 填写项目信息：
   - **项目名称**: `示例：大肠杆菌 K12`
   - **项目描述**: `用于演示 CGView 功能`
4. 点击 **"创建"** 按钮

项目创建成功后，您将看到项目列表页面，新创建的项目会显示在列表中。

### 4.2 步骤二：导入数据

1. 在项目卡片上点击 **"打开项目"**
2. 进入工作区后，点击右上角的 **"导入数据"** 按钮
3. 选择数据文件（支持 GenBank、GFF3、JSON、CSV 格式）
4. 点击 **"确定"** 开始导入

导入过程中会显示进度条，导入完成后会显示成功提示。

### 4.3 步骤三：配置可视化

导入完成后，CGView 会自动生成默认的可视化。您可以通过以下方式调整：

**调整图层显示**:
1. 切换到 **"图层配置"** 标签页
2. 勾选/取消勾选不同特征类型的显示
3. 调整颜色和透明度

**设置筛选条件**:
1. 切换到 **"特征筛选"** 标签页
2. 设置筛选条件（如：类型 = gene）
3. 观察可视化区域的变化

**添加统计轨道**:
1. 切换到 **"统计轨道"** 标签页
2. 点击 **"添加轨道"** 按钮
3. 选择轨道类型（如：GC 含量）
4. 调整窗口大小等参数

### 4.4 步骤四：保存配置

1. 在 **"图层配置"** 标签页中，点击 **"💾 保存"** 按钮
2. 输入配置名称：`我的基因组图层配置`
3. 输入描述信息：`适用于大肠杆菌的可视化配置`
4. 点击 **"确定"** 保存

这样，下次打开相同类型的数据时，可以直接加载此配置。

### 4.5 步骤五：导出结果

1. 点击右上角的 **"导出"** 按钮
2. 选择导出格式：
   - **PNG**: 适合插入 Word 文档或 PPT
   - **SVG**: 适合印刷或进一步编辑
3. 设置导出选项（分辨率、大小等）
4. 点击 **"导出"** 并选择保存位置

---

## 5. 详细功能说明

### 5.1 仪表盘

仪表盘是应用的首页，提供项目管理功能。

**功能列表**:
- **创建项目** - 新建基因组分析项目
- **项目列表** - 显示所有已创建的项目
- **项目搜索** - 按名称搜索项目
- **项目排序** - 按创建时间、更新时间排序
- **删除项目** - 移除不需要的项目

**项目信息展示**:
每个项目卡片显示：
- 项目名称
- 项目描述
- 创建时间
- 最近更新时间
- 包含的数据集数量

**操作按钮**:
- **打开项目** - 进入工作区
- **项目设置** - 修改项目信息
- **删除项目** - 永久删除项目及所有数据

### 5.2 工作区

工作区是数据分析的核心区域，采用左右分栏布局。

**左侧区域 - 可视化查看器**:
- 固定不滚动，始终显示完整图形
- 响应式设计，自适应窗口大小
- 集成 CGView.js 渲染引擎
- 支持鼠标缩放和平移（开发中）

**右侧区域 - 控制面板**:
- 独立滚动，不影响左侧可视化
- 包含三个标签页：
  - 图层配置
  - 特征筛选
  - 统计轨道
- 状态栏显示当前数据集信息和性能指标

### 5.3 视图模式

**传统视图**（开发中）:
- 完整的 CGView 功能
- 支持高级配置选项
- 适合专业用户

**增强视图**（推荐）:
- 现代化的标签页界面
- 简化的操作流程
- 更好的用户体验
- 适合大多数用户

**视图切换**:
在工作区顶部有视图切换按钮，可以随时在两种模式间切换。

---

## 6. 数据导入指南

### 6.1 支持的格式

#### GenBank 格式 (.gb, .gbk)

GenBank 是 NCBI 推荐的基因组注释格式，包含完整的序列和特征信息。

**示例**:
```
LOCUS       NC_000913       4641652 bp    DNA     circular CON 01-JAN-2022
DEFINITION  Escherichia coli str. K-12 substr. MG1655, complete genome.
ACCESSION   NC_000913
VERSION     NC_000913.3
KEYWORDS    .
SOURCE      Escherichia coli str. K-12 substr. MG1655
  ORGANISM  Escherichia coli K-12
FEATURES             Location/Qualifiers
     source          1..4641652
                     /organism="Escherichia coli"
                     /mol_type="genomic DNA"
                     /strain="K-12"
                     /substr="MG1655"
     gene            190..255
                     /gene="thrL"
                     /locus_tag="b0001"
     CDS             190..255
                     /gene="thrL"
                     /locus_tag="b0001"
                     /codon_start=1
                     /transl_table=11
                     /product="thr operon leader peptide"
```

**导入建议**:
- 优先使用 GenBank 格式，包含最完整的信息
- 确保文件编码为 UTF-8
- 大型基因组文件导入可能需要几分钟时间

#### GFF3 格式 (.gff3)

GFF3 是简化版的基因组特征格式，专注于特征位置和属性。

**示例**:
```
##gff-version 3
chr1    .       gene    100     200     .       +       .       ID=gene1;Name=thrL
chr1    .       CDS     100     200     .       +       0       ID=cds1;Parent=gene1
```

#### JSON 格式 (.json)

结构化的 JSON 数据，便于程序生成和解析。

**示例**:
```json
{
  "metadata": {
    "name": "Example Genome",
    "length": 10000
  },
  "features": [
    {
      "id": "feat1",
      "type": "gene",
      "name": "geneA",
      "start": 100,
      "end": 200,
      "strand": 1
    }
  ]
}
```

#### CSV 格式 (.csv)

逗号分隔的表格数据。

**示例**:
```
id,type,name,start,end,strand
feat1,gene,geneA,100,200,1
feat2,gene,geneB,300,400,-1
```

### 6.2 导入流程

1. **选择文件**
   - 点击"导入数据"按钮
   - 在文件选择对话框中选择文件
   - 或直接拖拽文件到工作区

2. **格式检测**
   - 系统自动检测文件格式
   - 显示检测结果和文件信息

3. **预览数据**
   - 查看导入的数据统计
   - 确认特征数量和类型
   - 检查是否有警告信息

4. **开始导入**
   - 点击"导入"按钮
   - 导入进度会实时显示
   - 完成后自动生成可视化

### 6.3 数据验证

导入过程中会进行以下验证：

- **文件完整性** - 检查文件是否损坏
- **格式正确性** - 验证文件格式是否符合标准
- **数据一致性** - 检查特征位置范围、链方向等
- **字符编码** - 确认文件编码为 UTF-8

**常见警告及解决方案**:

| 警告信息 | 含义 | 解决方案 |
|----------|------|----------|
| 特征位置超出序列长度 | start/end 位置错误 | 检查原始数据 |
| 重复的特征ID | 同一ID被多次使用 | 修改为唯一ID |
| 无效的链方向值 | strand 字段不正确 | 确保为 1/-1 |
| 缺少必需字段 | 缺少 name 或 type | 补充完整信息 |

### 6.4 导入历史

导入完成后，系统会自动记录：
- 导入时间
- 文件路径
- 格式类型
- 特征数量
- 任何警告或错误

历史记录可在工作区查看，便于追溯数据来源。

---

## 7. 工作区使用

### 7.1 界面布局

工作区采用标准的两栏布局：

**左栏 - 可视化区域**:
- 宽度：占屏幕剩余空间
- 高度：固定为 `calc(100vh - 180px)`
- 内容：环状基因组图形
- 行为：固定不滚动

**右栏 - 控制面板**:
- 宽度：固定 380px
- 高度：与左栏相同
- 内容：三个标签页
- 行为：独立滚动

### 7.2 标签页导航

**图层配置标签页**:
- 显示所有特征类型
- 控制每种类型的颜色和透明度
- 管理标签显示
- 批量操作功能

**特征筛选标签页**:
- 设置筛选条件
- 实时显示筛选结果
- 重置筛选功能

**统计轨道标签页**:
- 添加/删除统计轨道
- 配置轨道参数
- 调整轨道顺序

### 7.3 数据集选择

当项目包含多个数据集时：
1. 工作区顶部会显示数据集选择器
2. 点击下拉菜单选择数据集
3. 切换数据集后，可视化会自动更新
4. 配置不会自动同步，需手动应用

**最佳实践**:
- 为不同数据集使用不同的配置模板
- 及时保存好的配置方案
- 使用配置导入/导出功能在数据集间复用配置

### 7.4 状态栏信息

工作区底部显示：
- 当前数据集名称
- 特征总数和显示数量
- 内存使用情况
- 性能模式（高性能/优化）

这些信息有助于了解当前分析状态和性能情况。

---

## 8. 图层配置

图层配置是控制可视化显示效果的核心功能。

### 8.1 图层基础概念

**什么是图层**:
图层是特定类型特征的可视化层。每个特征类型（如 gene、CDS、rRNA）对应一个独立的图层，可以独立控制其显示和样式。

**图层顺序**:
图层按类型顺序渲染，后续添加的图层会覆盖前面的图层。可通过调整图层顺序改变显示优先级。

### 8.2 基本操作

**显示/隐藏图层**:
1. 在图层配置面板中找到目标特征类型
2. 勾选/取消勾选"显示"复选框
3. 立即生效，可视化会更新

**批量显示/隐藏**:
- **全部显示** - 一键显示所有图层
- **全部隐藏** - 一键隐藏所有图层
- 适用于需要临时隐藏/显示所有特征的情况

### 8.3 样式配置

**颜色设置**:
1. 点击颜色选择器
2. 在调色板中选择颜色
3. 或输入十六进制色值（如 #FF5733）
4. 立即生效

**颜色方案预设**:
CGView 提供多种预设颜色方案：
- **经典方案** - 适合学术论文
- **对比方案** - 突出不同特征类型
- **渐变方案** - 视觉更柔和
- **高对比方案** - 适合色弱用户

**透明度调整**:
1. 拖动透明度滑块
2. 或直接输入数值（0-100%）
3. 建议值：
   - 100% - 完全不透明
   - 70% - 轻度透明，保留一些背景
   - 50% - 半透明，便于观察重叠
   - 30% - 高度透明，突出主要特征

### 8.4 标签管理

**显示标签**:
1. 勾选"显示标签"选项
2. 选择标签字段：
   - **名称** - 使用特征名称（如 geneA）
   - **ID** - 使用特征ID（如 b0001）
   - **类型** - 使用特征类型（如 gene）

**标签样式**:
- **字体大小** - 调整标签文字大小
- **显示位置** - 内圈/外圈/中间
- **旋转角度** - 标签文字的旋转方向

**性能建议**:
- 特征数量 > 1000 时，建议隐藏标签以提升性能
- 或使用筛选功能缩小显示范围

### 8.5 高级功能

**图层优先级**:
设置图层的显示优先级：
1. 点击图层右侧的"优先级"按钮
2. 使用上下箭头调整顺序
3. 优先级高的图层会显示在上层

**自定义图层**:
可以创建自定义图层：
1. 点击"添加图层"按钮
2. 设置筛选条件
3. 为该图层配置样式
4. 保存图层配置

这对于分析特定条件下的特征非常有用。

---

## 9. 特征筛选

特征筛选帮助您快速定位和分析特定特征。

### 9.1 筛选条件

**按名称筛选**:
- 输入特征名称或部分名称
- 支持模糊匹配
- 输入 `abc` 会匹配 `abc`、`xabc`、`abcx` 等

**按类型筛选**:
- 从下拉菜单中选择特征类型
- 可多选，组合显示多种类型
- 常见类型：gene、CDS、rRNA、tRNA、misc_feature

**按位置筛选**:
- 设置最小位置（起始位点）
- 设置最大位置（结束位点）
- 只显示指定范围内的特征
- 用于分析特定基因组区域

**按链方向筛选**:
- **正向** - 显示链方向为 +1 的特征
- **反向** - 显示链方向为 -1 的特征
- **全部** - 显示所有特征，不限制链方向

**包含文本筛选**:
- 在任意字段中搜索关键词
- 搜索范围：名称、ID、描述、属性等
- 支持正则表达式（高级用户）

### 9.2 筛选组合

筛选条件可以组合使用，默认是"AND"关系：

**示例**:
```
条件1: 类型 = gene
条件2: 链方向 = 正向
条件3: 位置范围 = 1000-2000

结果: 显示 1000-2000 位置范围内的正向链基因
```

**使用技巧**:
- 先设置宽泛条件，再逐步细化
- 使用"包含文本"进行初步筛选
- 位置范围可以快速缩小分析范围

### 9.3 筛选结果统计

应用筛选后，面板会显示：
- **筛选后数量** - 满足条件的特征数量
- **原始数量** - 总特征数量
- **筛选比例** - 筛选后的百分比
- **详细信息** - 按类型统计的特征分布

这有助于了解筛选效果和数据分布。

### 9.4 筛选管理

**保存筛选条件**:
1. 设置好筛选条件
2. 点击"保存筛选"按钮
3. 输入筛选方案名称
4. 后续可快速加载使用

**加载已保存的筛选**:
1. 点击"加载筛选"按钮
2. 从列表中选择已保存的筛选方案
3. 点击"应用"按钮

**重置筛选**:
- 点击"重置"按钮清除所有筛选条件
- 或单独清除某个条件的值

---

## 10. 统计轨道

统计轨道为基因组数据添加定量分析维度。

### 10.1 轨道类型

#### GC 含量轨道

**功能**:
- 显示基因组每个区域的 GC 百分比
- 帮助识别 GC 含量异常的区域
- 常用于识别水平基因转移区域

**参数配置**:
- **窗口大小** (默认: 100)
  - 较小窗口（50）显示更精细的变化
  - 较大窗口（500）显示更平滑的趋势
- **基线** (默认: 50%)
  - 设置 GC 含量的参考线
  - 常见参考值：50%、45%、60%
- **颜色** (默认: 蓝色)
  - 高 GC：深蓝色
  - 低 GC：浅蓝色

**解读建议**:
- GC 含量 > 65% 的区域可能是 GC 富含岛
- GC 含量 < 35% 的区域可能是 AT 富含岛
- 突然的 GC 含量变化可能表示基因边界

#### GC 偏斜轨道

**功能**:
- 计算 (G-C)/(G+C) 偏斜度
- 揭示复制叉和突变偏斜信息
- 常用于分析基因组复制起始点

**参数配置**:
- **窗口大小** (默认: 1000)
- **基线** (默认: 0)
- **颜色** (默认: 绿色)

**解读建议**:
- 偏斜度变化点可能指示复制起点/终点
- 线性基因组的偏斜通常从正到负
- 环状基因组的偏斜呈周期性变化

#### 覆盖度轨道

**功能**:
- 显示测序覆盖度分布
- 评估测序质量和均匀性
- 识别可能的缺失或重复区域

**参数配置**:
- **窗口大小** (默认: 100)
- **基线** (需要根据测序深度设置)
- **颜色** (默认: 橙色)

**解读建议**:
- 覆盖度为 0 的区域可能是测序缺口
- 覆盖度过高的区域可能是重复序列
- 覆盖度波动剧烈表示测序不均匀

#### AT 含量轨道

**功能**:
- 显示基因组 AT 碱基含量
- 与 GC 含量互补分析
- 识别 AT 富含区域

**参数配置**:
- **窗口大小** (默认: 100)
- **基线** (默认: 50%)
- **颜色** (默认: 红色)

#### 碱基组成轨道

**功能**:
- 显示四种碱基（A、T、G、C）的相对比例
- 更详细的碱基组成分析

**参数配置**:
- **窗口大小** (默认: 500)
- **基线** (默认: 25%)
- **颜色** (多色编码：红色A、绿色T、蓝色G、橙色C)

**解读建议**:
- 观察各碱基的比例关系
- 识别特定碱基偏好的基因组区域

#### 特征密度轨道

**功能**:
- 显示每千碱基的特征数量
- 评估基因组的"基因密度"
- 识别基因富集或稀疏区域

**参数配置**:
- **窗口大小** (默认: 1000)
- **基线** (默认: 0)
- **颜色** (默认: 紫色)

**解读建议**:
- 原核生物：基因密度通常较高
- 病毒：基因密度最高
- 真核生物：基因密度较低

#### 序列复杂度轨道

**功能**:
- 使用熵值衡量序列复杂度
- 识别简单重复序列
- 评估序列的多样性

**参数配置**:
- **窗口大小** (默认: 100)
- **基线** (默认: 0)
- **颜色** (默认: 青色)

**解读建议**:
- 高复杂度区域：功能基因区域
- 低复杂度区域：重复序列、间隔区

### 10.2 轨道操作

**添加轨道**:
1. 切换到"统计轨道"标签页
2. 点击"添加轨道"按钮
3. 从下拉菜单选择轨道类型
4. 配置轨道参数
5. 点击"确定"添加

**删除轨道**:
1. 在轨道列表中找到目标轨道
2. 点击轨道右侧的"删除"按钮
3. 确认删除操作

**隐藏/显示轨道**:
- 取消勾选轨道名称前的复选框即可隐藏
- 重新勾选可显示轨道
- 隐藏的轨道不会影响计算，但不会显示在图形中

### 10.3 轨道参数优化

**窗口大小选择指南**:

| 数据规模 | 推荐窗口大小 | 用途 |
|----------|-------------|------|
| 小基因组 (< 100kb) | 50-100 | 精细分析 |
| 中等基因组 (100kb-1Mb) | 100-500 | 平衡细节与平滑 |
| 大基因组 (> 1Mb) | 500-1000 | 宏观趋势分析 |

**基线设置建议**:
- **GC 含量**: 50% 为通用基线
- **AT 含量**: 50% 为通用基线
- **覆盖度**: 设置为预期平均覆盖度
- **偏斜度**: 0 为标准基线
- **其他**: 0 为安全基线

**性能考虑**:
- 窗口大小越小，计算越耗时
- 特征数量 > 10,000 时，建议窗口大小 > 200
- 可适当增大窗口大小以提升性能

---

## 11. 配置管理

配置管理是 CGView 桌面版的强大功能，让您可以保存、复用和分享配置方案。

### 11.1 保存配置

**何时保存配置**:
- 完成满意的图层设置后
- 调整好筛选条件后
- 配置好统计轨道后
- 在数据分析的关键节点

**保存步骤**:
1. 在"图层配置"标签页中，点击 **"💾 保存"** 按钮
2. 弹出配置保存对话框：
   - **配置名称**: 输入描述性名称，如"大肠杆菌基因可视化配置"
   - **配置描述**: 详细描述配置用途和适用场景
   - **标签**: 添加标签便于分类（如：细菌、GC分析、论文用图）
3. 点击 **"确定"** 完成保存

**保存的内容**:
- 所有图层的显示状态
- 颜色和透明度设置
- 标签显示设置
- 当前筛选条件
- 统计轨道配置
- 所有参数设置

### 11.2 加载配置

**加载已保存配置**:
1. 在"图层配置"标签页中，点击 **"📂 加载"** 按钮
2. 弹出配置列表对话框：
   - 显示所有已保存的配置
   - 包含配置名称、描述、创建时间等信息
   - 支持搜索和筛选
3. 选择要应用的配置
4. 点击 **"应用"** 按钮
5. 确认应用（会覆盖当前配置）

**设置默认配置**:
1. 在配置列表中找到目标配置
2. 点击右侧的 **"设为默认"** 星形图标
3. 确认设置
4. 下次导入数据时会自动应用默认配置

**使用场景**:
- 同一类型数据的快速配置
- 不同研究目的的配置切换
- 团队间的标准化配置

### 11.3 导出配置

**导出为文件**:
1. 点击 **"⬇️ 导出"** 按钮
2. 选择导出格式（仅支持 JSON）
3. 选择导出位置
4. 输入文件名（建议使用 `.cgconfig.json` 后缀）
5. 点击 **"保存"** 完成导出

**导出的用途**:
- 在不同设备间同步配置
- 分享给团队成员
- 备份重要配置
- 版本控制和跟踪配置变更

**JSON 文件内容**:
```json
{
  "version": "0.3.0",
  "name": "我的基因组图层配置",
  "description": "适用于大肠杆菌的可视化配置",
  "tags": ["细菌", "基因", "标准配置"],
  "created": "2025-11-05T10:30:00Z",
  "layers": [
    {
      "type": "gene",
      "visible": true,
      "color": "#FF5733",
      "opacity": 80,
      "showLabels": true,
      "labelField": "name"
    }
    // ... 更多图层配置
  ],
  "filters": {
    "name": "",
    "types": ["gene"],
    "position": {
      "min": 0,
      "max": 0
    },
    "strand": "all",
    "searchText": ""
  },
  "tracks": [
    {
      "type": "gc-content",
      "visible": true,
      "windowSize": 100,
      "baseline": 50,
      "color": "#3498DB"
    }
    // ... 更多轨道配置
  ]
}
```

### 11.4 导入配置

**从文件导入**:
1. 点击 **"⬆️ 导入"** 按钮
2. 在文件选择对话框中选择 `.cgconfig.json` 文件
3. 系统会验证文件格式和内容
4. 预览导入的配置文件信息
5. 点击 **"导入"** 完成导入
6. 导入的配置会出现在配置列表中

**导入后的操作**:
- 可以立即应用到当前数据集
- 可以设置为默认配置
- 可以进一步编辑和调整
- 可以再次导出分享

**配置冲突处理**:
当导入的配置包含当前数据集没有的特征类型时：
- 会自动跳过不存在的类型
- 显示冲突提示信息
- 其他配置正常应用

### 11.5 配置管理最佳实践

**命名规范**:
- 使用描述性名称：包含生物体、研究目的等
- 避免特殊字符：使用字母、数字、下划线
- 添加版本号：如"v1.0"、"v2.1"

**分类管理**:
- 使用标签区分不同用途：
  - 按生物体：细菌、病毒、真菌
  - 按分析目的：基因注释、GC分析、比较分析
  - 按输出用途：论文图、报告图、演示图

**团队协作**:
1. 团队成员 A 创建标准配置
2. 导出为 JSON 文件
3. 通过邮件或共享文件夹分享
4. 团队成员 B 导入配置
5. 根据需要微调并保存为新配置

**版本控制**:
- 为重要配置添加版本信息
- 记录配置变更历史
- 定期备份所有配置

**定期维护**:
- 删除不再使用的配置
- 整理配置名称和描述
- 检查默认配置是否合适

---

## 12. 数据导出

### 12.1 导出格式

#### PNG 格式

**特点**:
- 位图格式，像素点组成
- 适合插入 Word、PPT 等文档
- 文件大小相对较小
- 适合网页显示

**分辨率选项**:
- **1x** (100%) - 适合网页显示
- **2x** (200%) - 适合一般打印
- **3x** (300%) - 适合高质量打印
- **4x** (400%) - 适合大幅面印刷

**推荐设置**:
- 论文用图：3x 或 4x
- 演示 PPT：2x
- 网页博客：1x 或 2x

#### SVG 格式

**特点**:
- 矢量格式，无限缩放不失真
- 文件大小取决于图形复杂度
- 适合进一步编辑（Illustrator、Inkscape）
- 适合印刷和大幅面展示

**优势**:
- 可无损缩放至任意尺寸
- 可编辑文字和图形元素
- 保持矢量特性
- 适合专业设计

**推荐场景**:
- 科学论文封面图
- 海报和横幅
- 需要进一步编辑的图形

### 12.2 导出流程

1. **准备可视化**
   - 完成所有图层配置
   - 应用筛选条件
   - 添加所需的统计轨道
   - 确认显示效果满意

2. **打开导出对话框**
   - 点击右上角 **"导出"** 按钮
   - 或使用快捷键 `Ctrl+E` (Windows/Linux) / `Cmd+E` (macOS)

3. **选择格式**
   - 在格式选择区域点击 **PNG** 或 **SVG**
   - PNG 格式会显示分辨率选项
   - SVG 格式无分辨率选项

4. **设置选项**
   - **背景颜色**：
     - 白色：适合大多数情况
     - 透明：适合叠加到其他图像
     - 黑色：适合深色主题
   - **包含标签**：勾选以包含特征标签
   - **包含图例**：勾选以包含图层图例（开发中）
   - **文件尺寸**：自动计算并显示

5. **选择保存位置**
   - 在文件保存对话框中选择位置
   - 输入文件名（建议包含项目名称和日期）
   - 例如：`E_coli_K12_analysis_2025-11-05.png`

6. **开始导出**
   - 点击 **"导出"** 按钮
   - 导出进度会实时显示
   - 完成后会弹出成功提示

### 12.3 导出质量优化

**提升 PNG 质量**:
- 使用更高的分辨率选项（3x 或 4x）
- 确保图层颜色对比度足够
- 避免过于复杂的图形（可能影响文件大小）

**优化 SVG 导出**:
- 适当减少轨道数量（避免过于密集）
- 合理设置标签显示（过多标签可能影响可读性）
- 测试在不同缩放级别下的显示效果

**文件大小控制**:
- 大数据集可能产生较大文件
- 隐藏部分轨道可减小文件大小
- 适当增大窗口大小可减少轨道复杂度

### 12.4 高级导出设置

**批处理导出**（开发中）:
- 一次导出多种格式
- 批量处理多个配置
- 生成不同分辨率版本

**自定义画布尺寸**（开发中）:
- 指定输出图像的宽高
- 设置页边距
- 添加标题和注释

### 12.5 导出后处理

**PNG 文件**:
- 可用任何图像编辑器进一步处理
- 建议保持原始分辨率，避免放大
- 可添加文字注释或图框

**SVG 文件**:
- 可在 Illustrator、Inkscape 中打开
- 可编辑文本、颜色和形状
- 可转换为其他矢量格式（AI、EPS、PDF）

**质量检查清单**:
- [ ] 图像清晰度满足需求
- [ ] 颜色对比度合适
- [ ] 标签可读
- [ ] 图例完整
- [ ] 比例尺正确
- [ ] 标题和说明添加

---

## 13. 性能优化

### 13.1 自动优化机制

CGView 桌面版内置智能优化系统，无需手动配置：

**内存监控**:
- 实时监控应用内存使用
- 阈值：100MB
- 超阈值时自动启用优化模式

**特征数量检测**:
- 自动统计特征总数
- 根据数量调整渲染策略
- 分层阈值：1,000 / 10,000 / 50,000 特征

**智能过滤**:
- 基于重要性评分排序特征
- 重要性算法：
  - 有名称：+2 分
  - 类型为 gene：+3 分
  - 其他类型：+1 分
- 自动保留高分特征

**分层采样**:
- 特征数量 > 10,000 时启用
- 采样率根据数据规模调整
- 保持特征分布的代表性

### 13.2 性能指标

**性能模式**:
- **高性能模式** - 特征 < 10,000，显示所有特征
- **优化模式** - 特征 ≥ 10,000，启用智能过滤

**性能提升数据**:

| 特征数量 | 优化前渲染时间 | 优化后渲染时间 | 性能提升 | 内存节省 |
|----------|---------------|---------------|----------|----------|
| 1,000 | 500ms | 335ms | 33% | 15% |
| 10,000 | 3,500ms | 1,330ms | 62% | 47% |
| 50,000 | 25,000ms | 2,750ms | 89% | 82% |

### 13.3 手动优化技巧

**合理使用筛选**:
- 先用宽泛条件缩小范围
- 再逐步细化筛选条件
- 避免同时使用过多筛选条件

**优化图层显示**:
- 特征数量多时，隐藏部分图层
- 调整透明度，避免重叠特征过多
- 隐藏标签提升渲染速度

**调整统计轨道**:
- 增大窗口大小以减少计算量
- 隐藏暂时不需要的轨道
- 避免添加过多轨道（建议 < 5）

**配置管理**:
- 为大数据集创建专门的优化配置
- 保存筛选和图层组合方案
- 复用已验证的配置

### 13.4 大数据集最佳实践

**数据分析策略**:
1. **全局概览** - 使用较大窗口（如 1000bp）的统计轨道
2. **局部详细分析** - 针对感兴趣区域缩小范围再详细查看
3. **分批分析** - 将大基因组分段分析
4. **重点特征优先** - 先查看高分特征（gene类型、有名称特征）

**硬件要求**:
- **RAM**: 8GB+ 强烈推荐
- **CPU**: 多核处理器有助提升计算速度
- **存储**: SSD 硬盘可提升数据加载速度

**数据准备**:
- 导入前先检查数据质量
- 删除不必要的注释信息
- 合理组织特征类型

---

## 14. 常见问题

### 14.1 安装相关

**Q: Node.js 版本过低导致安装失败**
```
A: 请升级 Node.js 到 16.0.0 或更高版本
   下载地址: https://nodejs.org/
   推荐使用最新 LTS 版本
```

**Q: npm install 报错：权限不足**
```
A: 不要使用 sudo 运行
   方案1: 配置 npm 全局目录到用户目录
   方案2: 使用 yarn 或 pnpm 代替 npm
```

**Q: 依赖安装缓慢或失败**
```
A: 可使用国内镜像源
   npm config set registry https://registry.npmmirror.com
   或使用 pnpm，速度更快
```

### 14.2 数据导入相关

**Q: 导入 GenBank 文件失败**
```
A: 检查以下几点：
   1. 文件编码是否为 UTF-8
   2. 文件是否完整（未损坏）
   3. 是否包含序列数据（SEQUENCE 部分）
   4. 特征位置是否在序列范围内
```

**Q: 特征数量显示不准确**
```
A: 可能原因：
   1. 数据格式问题（如位置格式错误）
   2. 重复的特征ID
   3. 边界条件特征（start > end）
   查看导入警告信息获取详细信息
```

**Q: 导入大文件时应用无响应**
```
A: 这是正常现象，导入大文件需要时间：
   1. 避免强制关闭应用
   2. 等待导入完成提示
   3. 文件越大，耗时越长（GBK 文件 10MB 约需 1-3 分钟）
   4. 建议先导入小部分数据测试格式
```

### 14.3 可视化相关

**Q: 图形显示为空白**
```
A: 排查步骤：
   1. 检查是否所有图层都被隐藏
   2. 确认有数据被导入
   3. 检查筛选条件是否过于严格
   4. 尝试重置筛选条件
   5. 刷新页面（F5 或 Ctrl+R）
```

**Q: 某些特征类型不显示**
```
A: 可能原因：
   1. 该类型特征被隐藏（取消勾选图层）
   2. 不符合当前筛选条件
   3. 数据中该类型特征数量为 0
   检查图层配置面板和筛选条件
```

**Q: 标签文字重叠难以阅读**
```
A: 解决方案：
   1. 隐藏标签（取消勾选"显示标签"）
   2. 缩小字体大小
   3. 使用筛选缩小特征范围
   4. 调整标签旋转角度
   5. 增大图像导出分辨率
```

### 14.4 性能相关

**Q: 渲染速度慢，界面卡顿**
```
A: 优化建议：
   1. 使用筛选功能缩小分析范围
   2. 隐藏暂时不需要的图层
   3. 隐藏标签（标签渲染耗时）
   4. 减少统计轨道数量
   5. 增大统计轨道窗口大小
   6. 重启应用释放内存
```

**Q: 内存占用过高**
```
A: 应对措施：
   1. 系统会自动启用优化模式
   2. 关闭其他不必要的应用程序
   3. 清理浏览器缓存
   4. 重启应用
   5. 考虑增加系统内存
```

**Q: 导出图像质量不满意**
```
A: 提升建议：
   1. 使用更高分辨率导出（3x 或 4x）
   2. 使用 SVG 格式（矢量图）
   3. 优化图层颜色对比度
   4. 适当简化图形（减少重叠）
   5. 使用图像编辑软件后期处理
```

### 14.5 配置管理相关

**Q: 保存的配置无法加载**
```
A: 检查方法：
   1. 确认配置名称输入正确
   2. 检查配置是否在列表中
   3. 尝试刷新页面后重新加载
   4. 检查浏览器本地存储是否被清除
```

**Q: 导入的配置不生效**
```
A: 可能原因：
   1. JSON 文件格式错误
   2. 配置版本不兼容
   3. 数据集缺少配置中定义的类型
   查看控制台错误信息获取详细原因
```

**Q: 如何在不同设备间同步配置**
```
A: 使用导出/导入功能：
   1. 在设备 A 导出配置为 JSON 文件
   2. 将文件传输到设备 B（邮件、云盘等）
   3. 在设备 B 导入该 JSON 文件
   4. 配置即可在新设备上使用
```

---

## 15. 最佳实践

### 15.1 数据准备

**文件质量**:
- 使用标准格式（GenBank 优先）
- 确保文件编码为 UTF-8
- 检查特征位置范围合法性
- 移除不必要的注释信息

**数据组织**:
- 为不同项目创建不同的数据文件
- 使用描述性文件名（包含生物体、菌株、日期）
- 定期备份原始数据文件
- 记录数据来源和获取时间

### 15.2 可视化设计

**颜色选择**:
- 使用色盲友好的配色方案
- 避免使用过多鲜艳颜色
- 保持同类特征颜色一致
- 高对比度确保可读性

**图层管理**:
- 优先显示重要的特征类型（如 gene）
- 将相似类型特征使用相近颜色
- 隐藏暂时不相关的图层
- 使用透明度处理重叠区域

**标签策略**:
- 数据集特征 < 500：可显示标签
- 数据集特征 500-5000：选择性显示标签
- 数据集特征 > 5000：建议隐藏标签
- 使用筛选功能显示特定特征标签

### 15.3 分析流程

**标准工作流程**:
```
1. 导入数据
   ↓
2. 全局概览（默认配置）
   ↓
3. 调整图层（突出重点）
   ↓
4. 应用筛选（缩小范围）
   ↓
5. 添加轨道（定量分析）
   ↓
6. 保存配置（便于复用）
   ↓
7. 导出图像（生成成果）
```

**迭代分析**:
1. 从粗粒度开始（全局视图）
2. 逐步细化（局部放大）
3. 记录发现（截图、笔记）
4. 调整策略（优化配置）
5. 重复直到得出结论

### 15.4 团队协作

**配置共享**:
1. 团队 leader 创建标准配置
2. 导出并分享给团队成员
3. 成员导入并根据需要微调
4. 记录本地修改和优化
5. 定期汇总优化到标准配置

**文档记录**:
- 保存每次分析的配置截图
- 记录重要发现和结论
- 维护分析笔记和日志
- 为关键配置添加详细说明

### 15.5 论文图表

**图像准备**:
1. 使用高分辨率导出（3x 或 4x）
2. 选择 SVG 格式便于编辑
3. 保持配色方案与论文风格一致
4. 添加比例尺和图例（如果需要）

**常见论文要求**:
- 分辨率：300 DPI 或更高
- 格式：TIFF、PNG 或矢量格式
- 尺寸：根据期刊要求设置
- 字体：使用标准字体，避免特殊字体

**图像优化**:
- 避免过于复杂的图形
- 确保元素间有足够间距
- 使用一致的标注风格
- 检查在不同尺寸下的可读性

### 15.6 性能调优

**大数据集处理**:
1. 先用小窗口快速概览
2. 定位感兴趣区域
3. 针对该区域详细分析
4. 保存该区域的专门配置

**资源管理**:
- 定期重启应用释放内存
- 避免同时打开多个大型数据集
- 及时保存配置避免重复设置
- 使用项目组织不同数据集

---

## 16. 故障排除

### 16.1 常见错误及解决方法

#### 错误 1: "数据库连接失败"

**症状**:
- 无法创建项目
- 数据导入失败
- 工作区无法打开

**原因**:
- SQLite 数据库文件损坏
- 权限不足
- 磁盘空间不足

**解决方案**:
1. 检查磁盘剩余空间（至少 100MB）
2. 确认应用有写入权限
3. 重启应用
4. 删除 `.cgview.db` 文件重新开始（会丢失所有数据）
5. 如果问题持续，请重新安装应用

#### 错误 2: "内存不足"

**症状**:
- 界面卡顿
- 导出失败
- 应用崩溃

**原因**:
- 数据集过大
- 系统内存不足
- 同时运行多个大型任务

**解决方案**:
1. 关闭其他应用程序释放内存
2. 重启 CGView
3. 使用筛选缩小数据集范围
4. 隐藏部分图层和标签
5. 增大统计轨道窗口大小
6. 考虑升级系统内存

#### 错误 3: "文件格式不支持"

**症状**:
- 导入文件时提示错误
- 文件无法打开

**原因**:
- 文件格式不在支持列表中
- 文件扩展名与实际格式不符
- 文件损坏

**解决方案**:
1. 确认文件格式为 .gb、.gbk、.gff3、.json 或 .csv
2. 使用文本编辑器检查文件头部
3. 验证文件编码为 UTF-8
4. 尝试使用其他工具转换格式
5. 查看导入警告获取详细信息

#### 错误 4: "配置文件损坏"

**症状**:
- 配置加载失败
- 应用报错

**原因**:
- JSON 配置文件格式错误
- 文件被意外修改
- 版本不兼容

**解决方案**:
1. 检查配置文件是否为有效 JSON
2. 使用 JSON 验证工具检查语法
3. 尝试导入其他已知正常的配置
4. 删除损坏的配置文件重新创建
5. 查看控制台错误信息

### 16.2 日志查看

**获取日志信息**:
1. 打开浏览器开发者工具（F12）
2. 切换到 Console 选项卡
3. 查找错误信息（红色文字）
4. 复制完整错误信息

**常用调试命令**:
```javascript
// 查看当前项目信息
console.log(window.cgview.getCurrentProject());

// 查看数据集信息
console.log(window.cgview.getCurrentDataset());

// 查看性能统计
console.log(window.cgview.getPerformanceStats());
```

### 16.3 数据恢复

**自动备份**:
CGView 会自动在以下位置备份数据：
- Windows: `%APPDATA%/cgview/backups/`
- macOS: `~/Library/Application Support/cgview/backups/`
- Linux: `~/.local/share/cgview/backups/`

**手动备份**:
1. 导出项目配置为 JSON
2. 导出重要数据为 CSV 或 JSON
3. 截图保存关键可视化结果
4. 记录重要的配置参数

**恢复步骤**:
1. 重新安装 CGView（如果需要）
2. 创建新项目
3. 重新导入数据
4. 应用保存的配置
5. 验证数据完整性

### 16.4 联系支持

**提交问题报告**:
如果遇到无法解决的问题，请提供：
1. 详细的错误描述
2. 操作步骤
3. 错误信息截图
4. 系统环境信息（操作系统、Node.js 版本等）
5. 相关配置文件（如适用）

**联系方式**:
- GitHub Issues: https://github.com/your-org/cgview-desktop/issues
- 邮件: support@cgview-desktop.example.com
- 讨论区: https://github.com/your-org/cgview-desktop/discussions

**响应时间**:
- 一般问题：1-3 个工作日
- 严重问题：24 小时内
- 紧急问题：4 小时内

---

## 附录

### A. 快捷键列表

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 导出图像 | Ctrl+E | Cmd+E |
| 保存配置 | Ctrl+S | Cmd+S |
| 加载配置 | Ctrl+L | Cmd+L |
| 刷新工作区 | F5 | F5 |
| 搜索项目 | Ctrl+F | Cmd+F |
| 新建项目 | Ctrl+N | Cmd+N |

### B. 配置文件格式说明

详见 [配置格式规范](./docs/Config-Format.md)

### C. API 文档

详见 [开发者 API 文档](./docs/API-Reference.md)

### D. 贡献指南

详见 [CONTRIBUTING.md](./CONTRIBUTING.md)

---

**手册版本**: v0.3.0
**最后更新**: 2025年11月5日
**维护团队**: CGView Desktop Team

如需更新此手册或有改进建议，请通过 GitHub Issues 联系我们。
